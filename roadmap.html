<!DOCTYPE html>

<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Excel Basic2Pro Roadmap</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<script>

/* ================= LOGIN CHECK ================= */

let token = localStorage.getItem("googleUserToken");

if(!token){
window.location = "index.html";
}

/* ================= TOKEN DECODE ================= */

function parseJwt(token) {

let base64Url = token.split('.')[1];
let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');

let jsonPayload = decodeURIComponent(
atob(base64)
.split('')
.map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
.join('')
);

return JSON.parse(jsonPayload);

}

let userData = parseJwt(token);

/* ================= PLAN SYSTEM ================= */

let planKey = "plan_" + userData.email;
let userPlan = localStorage.getItem(planKey) || "free";

/* ================= NAVIGATION ================= */

function goPro(){
window.location = "pricing.html";
}

function logout(){

google?.accounts?.id?.disableAutoSelect?.();

localStorage.removeItem("googleUserToken");

window.location = "index.html";

}

</script>

<style>

body{
margin:0;
font-family:Poppins;
background:linear-gradient(180deg,#0b1724,#07111b);
color:white;
text-align:center;
}

/* TOP BAR */

.topbar{
display:flex;
justify-content:space-between;
align-items:center;
padding:12px 20px;
background:#0f1c2b;
border-bottom:1px solid rgba(255,255,255,0.08);
}

.brand{
color:#4cffb2;
font-weight:bold;
font-size:18px;
}

.user-area{
display:flex;
align-items:center;
gap:12px;
}

.avatar{
width:38px;
height:38px;
border-radius:50%;
border:2px solid #4cffb2;
}

.upgrade-btn{
padding:6px 14px;
border:none;
border-radius:8px;
background:linear-gradient(90deg,#ffd700,#ffb700);
color:black;
cursor:pointer;
font-weight:bold;
}

.logout-btn{
padding:6px 14px;
border:none;
border-radius:8px;
background:linear-gradient(90deg,#ff5757,#ff8a57);
color:white;
cursor:pointer;
font-weight:bold;
}

/* ROAD */

h1{
margin:20px;
color:#4cffb2;
}

.road{
position:relative;
width:100%;
max-width:420px;
margin:auto;
padding:40px 0;
}

.path{
position:absolute;
left:50%;
top:0;
width:6px;
height:100%;
background:#1e3a52;
transform:translateX(-50%);
border-radius:10px;
}

.level{
position:relative;
margin:50px 0;
display:flex;
align-items:center;
}

.left{ justify-content:flex-start; padding-left:30px; }
.right{ justify-content:flex-end; padding-right:30px; }

.circle{
width:65px;
height:65px;
border-radius:50%;
background:#1e3a52;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
transition:.3s;
}

.completed{
background:#4cffb2;
color:black;
}

.locked{
opacity:.4;
pointer-events:none;
}

.label{
position:absolute;
top:70px;
width:160px;
font-size:13px;
}

.left .label{ left:0; text-align:left; }
.right .label{ right:0; text-align:right; }

.phase{
margin:30px 0 10px;
font-weight:600;
color:#00e0ff;
background:#0b1724;
display:inline-block;
padding:4px 10px;
border-radius:6px;
}

/* PROGRESS */

.top-controls{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:30px;
padding:0 20px;
}

.progress-box{ width:45%; text-align:left; }

.progress-bar{
height:10px;
background:#1e3a52;
border-radius:20px;
overflow:hidden;
}

.progress-fill{
height:100%;
width:0%;
background:#4cffb2;
transition:.3s;
}

.reset-btn{
padding:8px 14px;
border:none;
border-radius:8px;
background:#ff5757;
color:white;
cursor:pointer;
}

</style>

</head>

<body>

<div class="topbar">

<div class="brand">Basic2Pro</div>

<div class="user-area">

<img id="userPic" class="avatar">
<span id="userName"></span>

<button class="upgrade-btn" onclick="goPro()">Upgrade</button> <button class="logout-btn" onclick="logout()">Logout</button>

</div>

</div>

<h1>Excel Basic2Pro Roadmap</h1>

<div class="road">

<div class="path"></div>

<div class="top-controls">
<div class="progress-box">
Progress: <span id="progressPercent">0%</span>
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>
</div>

<button class="reset-btn" onclick="resetProgress()">Reset Progress</button>

</div>

<!-- PHASES (same as yours) -->

<div class="phase">Phase 1 — Excel Basics</div>
<div class="level left"><div class="circle">1</div><div class="label">Excel Interface</div></div>
<div class="level right"><div class="circle locked">2</div><div class="label">Data Entry</div></div>
<div class="level left"><div class="circle locked">3</div><div class="label">Basic Formulas</div></div>
<div class="level right"><div class="circle locked">4</div><div class="label">Basic Maths</div></div>
<div class="level left"><div class="circle locked">5</div><div class="label">Autofill</div></div>
<div class="level right"><div class="circle locked">6</div><div class="label">Simple Table</div></div>
<div class="level left"><div class="circle locked">7</div><div class="label">Open Save Print</div></div>

<div class="phase">Phase 2 — Practical Excel</div>
<div class="level right"><div class="circle locked">8</div><div class="label">Salary Sheet</div></div>
<div class="level left"><div class="circle locked">9</div><div class="label">Attendance</div></div>
<div class="level right"><div class="circle locked">10</div><div class="label">Marksheet</div></div>
<div class="level left"><div class="circle locked">11</div><div class="label">Invoice</div></div>
<div class="level right"><div class="circle locked">12</div><div class="label">Sort Filter</div></div>
<div class="level left"><div class="circle locked">13</div><div class="label">Conditional Formatting</div></div>
<div class="level right"><div class="circle locked">14</div><div class="label">Data Validation</div></div>

<div class="phase">Phase 3 — Formulas</div>
<div class="level left"><div class="circle locked">15</div><div class="label">IF</div></div>
<div class="level right"><div class="circle locked">16</div><div class="label">VLOOKUP</div></div>
<div class="level left"><div class="circle locked">17</div><div class="label">XLOOKUP</div></div>
<div class="level right"><div class="circle locked">18</div><div class="label">Text Functions</div></div>
<div class="level left"><div class="circle locked">19</div><div class="label">COUNTIF</div></div>
<div class="level right"><div class="circle locked">20</div><div class="label">SUMIF</div></div>
<div class="level left"><div class="circle locked">21</div><div class="label">Absolute Ref</div></div>

<div class="phase">Phase 4 — Analysis</div>
<div class="level right"><div class="circle locked">22</div><div class="label">Text to Columns</div></div>
<div class="level left"><div class="circle locked">23</div><div class="label">Pivot Table</div></div>
<div class="level right"><div class="circle locked">24</div><div class="label">Charts</div></div>
<div class="level left"><div class="circle locked">25</div><div class="label">Dashboard</div></div>
<div class="level right"><div class="circle locked">26</div><div class="label">Find Replace</div></div>
<div class="level left"><div class="circle locked">27</div><div class="label">Freeze</div></div>

<div class="phase">Phase 5 — Advanced</div>
<div class="level left"><div class="circle locked">28</div><div class="label">Named Ranges</div></div>
<div class="level right"><div class="circle locked">29</div><div class="label">Index Match</div></div>
<div class="level left"><div class="circle locked">30</div><div class="label">Nested IF</div></div>
<div class="level right"><div class="circle locked">31</div><div class="label">Offset</div></div>
<div class="level left"><div class="circle locked">32</div><div class="label">VBA</div></div>
<div class="level right"><div class="circle locked">33</div><div class="label">Advanced Pivot</div></div>
<div class="level left"><div class="circle locked">34</div><div class="label">Data Model</div></div>
<div class="level right"><div class="circle locked">35</div><div class="label">Power Query</div></div>

</div>

<script>

/* DISPLAY USER */

document.getElementById("userName").innerText = userData.name;
document.getElementById("userPic").src = userData.picture;

if(userPlan === "pro"){
document.querySelector(".upgrade-btn").style.display="none";
}

/* ROAD LOGIC */

const levels = document.querySelectorAll(".circle");

levels.forEach((c,i)=>{
let saved = localStorage.getItem("topic"+i);
if(saved==="done") c.classList.add("completed");
});

unlock();
updateProgress();

levels.forEach((c,i)=>{
c.addEventListener("click",()=>{
c.classList.add("completed");
localStorage.setItem("topic"+i,"done");
unlock();
updateProgress();
});
});

function unlock(){

levels.forEach((c,i)=>{

/* Phase 5 lock for free users */
if(userPlan !== "pro" && i >= 27){
c.classList.add("locked");
return;
}

if(i===0) return;

if(levels[i-1].classList.contains("completed")){
c.classList.remove("locked");
}

});

}

function updateProgress(){

let completed=document.querySelectorAll(".circle.completed").length;
let total=levels.length;

let percent=Math.round((completed/total)*100);

document.getElementById("progressFill").style.width=percent+"%";
document.getElementById("progressPercent").innerText=percent+"%";

}

function resetProgress(){

if(confirm("Reset progress?")){

levels.forEach((c,i)=>{
localStorage.removeItem("topic"+i);
c.classList.remove("completed");
c.classList.add("locked");
});

levels[0].classList.remove("locked");

updateProgress();

}

}

</script>

</body>
</html>
